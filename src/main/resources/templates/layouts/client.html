<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	th:with="currentPage=${currentPage}"
	lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title layout:fragment="title">Client</title>

<!-- Bootstrap 5.3.2 CSS from CDN -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" 
      rel="stylesheet" 
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" 
      crossorigin="anonymous"
      onerror="this.onerror=null; this.href='/css/bootstrap.min.css';">

<!-- Bootstrap Icons -->
<link rel="stylesheet" 
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
      integrity="sha384-XGjxtQfXaH2tnPFa9x+ruJTuLE3Aa6LhHSWRr1XeTyhezb4abCG4ccI5AkVDxqC+" 
      crossorigin="anonymous">

<!-- Custom CSS (loads after Bootstrap) -->
<link rel="stylesheet" th:href="@{/css/custom.css}">
<link rel="stylesheet" th:href="@{/css/customer.css}">
</head>
<body layout:fragment="page">

    <!-- Header -->
    <div th:replace="fragments/header :: header"></div>

    <!-- Page-specific content -->
    <main id="main-content" tabindex="-1">
        <div layout:fragment="content"></div>
    </main>

    <!-- Footer -->
    <div th:replace="fragments/footer :: footer"></div>

    <!-- Bootstrap 5.3.2 JS from CDN -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" 
            integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" 
            crossorigin="anonymous"
            onerror="this.onerror=null; this.src='/js/bootstrap.bundle.min.js';"></script>

    <!-- Custom JS -->
    <script th:src="@{/js/custom.js}"></script>
    
    <script th:if="${currentPage == 'register'}">
	    function previewImage(input) {
		        const preview = document.getElementById('imagePreview');
		
		        if (input.files && input.files[0]) {
		            const reader = new FileReader();
		
		            reader.onload = function (e) {
		                preview.src = e.target.result;
		                preview.style.display = 'block';
		            };
		
		            reader.readAsDataURL(input.files[0]);
		        }
		        console.log("previewImage triggered");
		    }
	</script>
	<script th:if="${currentPage == 'checkout'}">
	    document.addEventListener("DOMContentLoaded", function () {
	        const alerts = document.querySelectorAll(".auto-hide");
	
	        alerts.forEach(alert => {
	            setTimeout(() => {
	                alert.classList.add("fade");
	                alert.classList.remove("show");
	
	                // remove from DOM after fade
	                setTimeout(() => alert.remove(), 500);
	            }, 3000);
	        });
	    });
	</script>
</body>
</html>