<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/admin}">
<head>
<title layout:fragment="title">Order Details</title>
</head>
<body>
	<!-- Page Title -->
	<span layout:fragment="pageTitle">Order Details</span>
	
	<div layout:fragment="content">
		<div class="row">
			<div class="col-12">
				<!-- Back Button -->
				<div class="mb-3">
					<a th:href="@{/dashboard/order}" class="btn btn-secondary">
						<i class="bi bi-arrow-left me-2"></i>Back to Orders
					</a>
				</div>
				
				<!-- Order Header -->
				<div class="card mb-3">
					<div class="card-header bg-info text-white">
						<h5 class="mb-0">
							<i class="bi bi-receipt me-2"></i>Order #<span th:text="${order.id}"></span>
						</h5>
					</div>
				</div>
				
				<!-- Customer Information -->
				<div class="card mb-3">
					<div class="card-header bg-light">
						<h6 class="mb-0"><i class="bi bi-person me-2"></i>Customer Information</h6>
					</div>
					<div class="card-body">
						<div class="row">
							<div class="col-md-6">
								<p><strong>Name:</strong> <span th:text="${order.account.fullname}"></span></p>
								<p><strong>Email:</strong> <span th:text="${order.account.email}"></span></p>
							</div>
							<div class="col-md-6">
								<p><strong>Phone:</strong> <span th:text="${order.account.phone}"></span></p>
								<p><strong>Username:</strong> <span th:text="${order.account.username}"></span></p>
							</div>
						</div>
					</div>
				</div>
				
				<!-- Order Information -->
				<div class="card mb-3">
					<div class="card-header bg-light">
						<h6 class="mb-0"><i class="bi bi-info-circle me-2"></i>Order Information</h6>
					</div>
					<div class="card-body">
						<div class="row">
							<div class="col-md-6">
								<p><strong>Order ID:</strong> <span th:text="'#' + ${order.id}"></span></p>
								<p><strong>Order Date:</strong> <span th:text="${#temporals.format(order.createDate, 'dd/MM/yyyy')}"></span></p>
							</div>
							<div class="col-md-6">
								<p><strong>Status:</strong> 
									<span class="status-badge" 
										th:classappend="${order.status == 'Pending' ? 'pending' : 
														 order.status == 'Processing' ? 'processing' : 
														 order.status == 'Shipped' ? 'shipped' : 
														 order.status == 'Delivered' ? 'completed' : 
														 order.status == 'Cancelled' ? 'cancelled' : ''}"
										th:text="${order.status}">
									</span>
								</p>
								<p><strong>Delivery Address:</strong> <span th:text="${order.address}"></span></p>
							</div>
						</div>
					</div>
				</div>
				
				<!-- Order Items -->
				<div class="card">
					<div class="card-header bg-light">
						<h6 class="mb-0"><i class="bi bi-cart me-2"></i>Order Items</h6>
					</div>
					<div class="card-body p-0">
						<div class="table-responsive">
							<table class="table table-hover align-middle mb-0">
								<thead>
									<tr>
										<th>Product</th>
										<th>Price</th>
										<th>Quantity</th>
										<th>Subtotal</th>
									</tr>
								</thead>
								<tbody>
									<tr th:each="detail : ${order.orderDetails}">
										<td th:text="${detail.product.name}"></td>
										<td th:text="${currencyUtil.format(detail.price)}"></td>
										<td th:text="${detail.quantity}"></td>
										<td th:text="${currencyUtil.format(detail.price * detail.quantity)}"></td>
									</tr>
									<tr class="table-light">
										<td colspan="3" class="text-end"><strong>Total:</strong></td>
										<td><strong th:text="${currencyUtil.format(orderTotal)}"></strong></td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</body>
</html>
